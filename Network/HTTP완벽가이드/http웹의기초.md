## 1장 HTTP 개관

### 1.1 HTTP 인터넷의 멀티미디어 배달부

- HTTP란?
  - Hypertext Transfer Protocol의 줄임말
  - HTTP통신은 전송 중 파괴, 중복, 왜곡되는 것을 걱정하지 않아도 되는 신뢰성 있는 데이터 전송 프로토콜이다

### 1.2 웹 클라이언트와 서버

- 웹 서버
  - 웹 콘텐츠가 존재하는 곳
  - HTTP 프토로콜로 의사소통하기 때문에 HTTP 서버라고도 불린다
  - 웹 서버는 인터넷에 데이터를 저장하고, 클라이언트가 요청한 데이터를 제공한다

### 1.3 리소스

- 웹 리소스

  - 웹 콘텐츠의 원천
  - 웹 콘텐츠에는 '정적 콘텐츠' '동적 콘텐츠' 가 있다.

  - 정적 파일이란?
    - 텍스트 파일, HTML, 이미지등을 가리킨다
  - 동적 콘텐츠는 사용자가 누군인지, 어떤 정보를 요청했는지에 따라 다른 콘텐츠를 생성한다

#### 웹 리소스 종류

1. 미디어 타입

- 웹 서버는 모든 HTTP 객체 데이터에 MIME타입을 붙인다

  - MIME
    - Multipurpose Internet Mail Extensions
    - 원래에는 각기 다른 전자메일 시스템 사이에서 메세지가 오갈 때 겪는 문제점을 해결하기 위해 설계됨
    - HTTP에서도 멀티미디어 콘텐츠를 기술하고 라벨을 붙이기 위해 채택 됨

- MIME타입의 특징

  1. 사선으로 주 타입과 부타입으로 구분된 문자열로 표현된다
  2. 예시

  - HTML -> test/html
  - plain ASCII -> text/plain
  - JPEG -> image/jpeg
  - GIF -> image/gif

2. URL

- URL
  - uniform resource identifier
  - 통합 자원 식별자
- 특정 서버의 한 리소스에 대한 구체적인 위치를 서술하는 역할 수행

- 특징
  1. 첫 번째 부분은 scheme이라고 불린다
     - 리소스에 접근하기 위해 사용되는 프로토콜을 서술
     - 보통은 http:// 와 같은 HTTP프로토콜이다
  2. 두 번째 부분은 서버의 인터넷 주소를 제공
  3. 세 번째 부분은 웹 서버의 리소소를 가리킨다

3. URN

- URN
  - uniform resource name
  - 콘텐츠를 이루는 한 리소스에 대해 그 리소스 위치에 영향 받지 않는 유일무이한 이름 역할
  - URN은 리소를 이리저리 옮기더라도 유일무이한 이름이기 때문에 문제없이 동작한다
  - 아직은 실험적인 내용

### 1.4 트랜잭션

- http 트랜잭션
  - 요청 명령 (클라이언트에서 서버로 보내는 )
    - 명령과 url을 포함
  - 응답 결과 (서버가 클라이언트에게 돌려주는) 으로 구성되어 있다.
    - 트랜잭션의 결과를 포함

1. 메서드

- HTTP가 지원하는 여러 가지 종류의 요청 명령
- 모든 HTTP 요청 메세지는 한 개의 메서드를 가진다
- 대표적으로 GET, PUT, DELETE, POST 등이 있다

2. 상태 코드

- 클라이언트에게 요청이 성공했는지 추가 조치가 필요한지 여부에 대해 알려주는 숫자이다
- 대표적으로는 200, 302, 404가 있다

3. 메세지

- plain text형식을 가지고 있다
- 요청시에는 서버에 필요한 내용, 응답시에는 클라이언트가 필요한 내용을 담아 보낸다

### 1.6 TCP 커넥션

- 메세지는 어떻게 TCP (transmission Control Protocol)커넥션을 통해서 한 곳 에서 다른 곳으로 넘어가는 지

1. HTTP

- application layer protocol
- 네트워크 통신의 핵심적인 세부 사항에 대해서는 신경쓰지 않는다

2. TCP / IP

- 패킷 교환 네트워크 프로토콜의 집합
- 각 네트워크와 하드웨어의 특성을 숨기고 어떤 종류의 컴퓨터나 네트워크라도 신뢰성 있는 의사소통을 할 수 있도록 도와줌

- 오류 없는 데이터 전송
- 순서에 맞는 전달
- 조각나지 않은 데이터 스트림 을 제공하는 계층

- TCP 커넥션이 맺어지면, 클라이언트와 서버 컴퓨터 간에 교환되는 메세지는 없어지거나 손상되거나 순서가 뒤바뀌어 수신되는 일은 없다

3. IP

- Internet protocol IP 의 줄임말
- HTTP client가 서버에 메세지를 전송할 수 있을려면, 인터넷 프로토콜 주소와 포트번호를 사용하여 TCP / IP 커넥션을 맺어준다
- TCP에서는 IP주소와 포트번호가 필요하다

  - 이 때에, URL을 사용하여 해당 정보를 알아 낸다

- URL 을 통해 알아 낼 수 있는 것들
  - 도메인 또는 호스트의
    - DNS (도메인 이름 서비스)를 통해 IP로 변환한다
  - 포트 번호
    - 없으면 기본으로 80으로 처리한다

##### 실제 커넥션 순서

1. 웹 브라우저는 서버의 URL에서 호스트명 추출
2. 웹 브라우저는 호스트명을 DNS을 통해서 IP로 변환
3. URL에 포트 번호을 추출한다
4. 웹 브라우저는 웹 서버와 TCP 커넥션을 맺는다
5. 웹 브라우저는 서버에 HTTP 요청을 보낸다
6. 서버는 웹 브라우저에 HTTP 응답을 돌려준다
7. 커넥션이 닫히면, 웹 브라우저는 문서를 보여준다

### 1.7 프로토콜 버전

1. HTTP 1.0+

- keep alive 커넥션 제공
- 가상 호스트 지원
- 프락시 연결 지원

### 1.8 웹의 구성 요소

1. proxy

- client와 서버 사이에 위치한 HTTP 중개자
- 웹보안 , 애플리케이션 통합, 성능최적화를 위한 중요한 구성 요소
- 클라이언트와 서버 사이에 위치하여, 크라이언트의 모든 HTTP 요청을 받아 서버에 전달
- 애플리케이션은 사용자를 위한 프락시로 동작하며 사용자를 대신하여 서버에 접근
- 주로, 보안을 위해 사용됨
- 요청과 응답을 필터링한다

2. cache

- 자주 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- HTTP proxy 서버
- 클라이언트는 멀리 떨어져 있는 웹 서버보다 근처의 캐시에서 훨씬 더 빨리 문서를 다운 받을 수 있다

3. gateway

- 다른 애플리케이션과 연결된 특별한 웹 서버
- 다른 서버들의 중개자로 동작하는 특별한 서버
- HTTP트래픽을 다른 프로토콜로 변환하기 위해 사용한다
- 스스로 리소스를 갖고 있는 진짜 서버인 것처럼 요청을 다룬다

4. tunnel

- http통신을 전달하기만 하는 특별한 프락시
- 두 커넥션 사이에서 데이터를 그대로 전달해준다
- 주로 암호화된 ssl 트래픽을 HTTP 커넥션으로 전송하므로써 웹 트래팩만 허용하는 사내방화벽을 통과시키는데 사용된다

5. agent

- 자동화된 HTTP 요청을 만드는 준지능적 웹 크라이언트
- http 요청을 만들어주는 클라이언트 프로그램
- 예를 들어 웹 브라우저등이 있다
